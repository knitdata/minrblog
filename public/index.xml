<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Min Tamang</title>
    <link>/</link>
      <atom:link href="/index.xml" rel="self" type="application/rss+xml" />
    <description>Min Tamang</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><copyright>© Min Tamang 2020</copyright><lastBuildDate>Sat, 01 Jun 2030 13:00:00 +0000</lastBuildDate>
    <image>
      <url>/images/icon_hufac689ed154f22ff77b5bea0395abf25_7664_512x512_fill_lanczos_center_2.png</url>
      <title>Min Tamang</title>
      <link>/</link>
    </image>
    
    <item>
      <title>Example Talk</title>
      <link>/talk/example/</link>
      <pubDate>Sat, 01 Jun 2030 13:00:00 +0000</pubDate>
      <guid>/talk/example/</guid>
      <description>&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    Click on the &lt;strong&gt;Slides&lt;/strong&gt; button above to view the built-in slides feature.
  &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Slides can be added in a few ways:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Create&lt;/strong&gt; slides using Academic&amp;rsquo;s 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/managing-content/#create-slides&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;em&gt;Slides&lt;/em&gt;&lt;/a&gt; feature and link using &lt;code&gt;slides&lt;/code&gt; parameter in the front matter of the talk file&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Upload&lt;/strong&gt; an existing slide deck to &lt;code&gt;static/&lt;/code&gt; and link using &lt;code&gt;url_slides&lt;/code&gt; parameter in the front matter of the talk file&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Embed&lt;/strong&gt; your slides (e.g. Google Slides) or presentation video on this page using 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/writing-markdown-latex/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;shortcodes&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Further talk details can easily be added to this page using &lt;em&gt;Markdown&lt;/em&gt; and $\rm \LaTeX$ math code.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>TF-IDF &amp; Sentiment Analysis </title>
      <link>/post/2020-06-09-sentiment-analysis.en/sentiment-analysis/</link>
      <pubDate>Tue, 09 Jun 2020 00:00:00 +0000</pubDate>
      <guid>/post/2020-06-09-sentiment-analysis.en/sentiment-analysis/</guid>
      <description>


&lt;p&gt;The TF-IDF is computed by multiplying two terms:TF and IDF. TF is the normalized term frequency and IDF is the inverse document frequency.
Therefore, the formula for TF-IDF is TFxIDF&lt;/p&gt;
&lt;p&gt;where,
&lt;span class=&#34;math display&#34;&gt;\[\text{TF} = (\frac{\text{number of times term appears in a document}}{\text{Total number of terms in the document}})\]&lt;/span&gt;
and
&lt;span class=&#34;math display&#34;&gt;\[\text{IDF} = \ln(\frac{n_{\text{ documents }}}{n_{\text{document containing term}}})\]&lt;/span&gt;
TF-IDF can be used for ranking important documents(page ranking). For example when we google a term COVID-19, the results are displayed in order of relevance. TF-IDF gives searched word(COVID-19) a higher score.&lt;/p&gt;
&lt;div id=&#34;tf-idf-on-gutenberg-books&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;TF-IDF on Gutenberg books&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(pacman)
p_load(gutenbergr,tidyr,tidyverse,tidytext,forcats,
       genius)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#books on mathematics from project glutenberg
math_books &amp;lt;- gutenberg_download(c(16449,25664,17001,16713), meta_fields = &amp;quot;title&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Determining mirror for Project Gutenberg from http://www.gutenberg.org/robot/harvest&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Using mirror http://aleph.gutenberg.org&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#frequencies of words in each book
math_words &amp;lt;- math_books %&amp;gt;% 
  unnest_tokens(word, text) %&amp;gt;% count(title, word, sort = TRUE)
math_words&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 24,655 x 3
##    title                                                 word      n
##    &amp;lt;chr&amp;gt;                                                 &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt;
##  1 Amusements in Mathematics                             the   12480
##  2 Amusements in Mathematics                             of     4908
##  3 Amusements in Mathematics                             and    3921
##  4 Amusements in Mathematics                             a      3833
##  5 Amusements in Mathematics                             in     3672
##  6 Amusements in Mathematics                             to     3598
##  7 The Number Concept: Its Origin and Development        the    3177
##  8 An Elementary Course in Synthetic Projective Geometry the    2750
##  9 The Earliest Arithmetics in English                   e      2579
## 10 Amusements in Mathematics                             is     2542
## # … with 24,645 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#tf-idf
tfidf_mathbooks &amp;lt;- math_words %&amp;gt;%
  bind_tf_idf(word, title, n) %&amp;gt;%
  mutate(word = fct_reorder(word, tf_idf)) %&amp;gt;%
  mutate(title = factor(title, levels = c( &amp;quot;The Number Concept: Its Origin and Development&amp;quot;,&amp;quot;The Earliest Arithmetics in English&amp;quot;, &amp;quot;An Elementary Course in Synthetic Projective Geometry&amp;quot;,&amp;quot;Amusements in Mathematics&amp;quot;)))
tfidf_mathbooks&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 24,655 x 6
##    title                                         word      n     tf   idf tf_idf
##    &amp;lt;fct&amp;gt;                                         &amp;lt;fct&amp;gt; &amp;lt;int&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;
##  1 Amusements in Mathematics                     the   12480 0.0753 0     0     
##  2 Amusements in Mathematics                     of     4908 0.0296 0     0     
##  3 Amusements in Mathematics                     and    3921 0.0237 0     0     
##  4 Amusements in Mathematics                     a      3833 0.0231 0     0     
##  5 Amusements in Mathematics                     in     3672 0.0222 0     0     
##  6 Amusements in Mathematics                     to     3598 0.0217 0     0     
##  7 The Number Concept: Its Origin and Developme… the    3177 0.0578 0     0     
##  8 An Elementary Course in Synthetic Projective… the    2750 0.0788 0     0     
##  9 The Earliest Arithmetics in English           e      2579 0.0527 0.288 0.0151
## 10 Amusements in Mathematics                     is     2542 0.0153 0     0     
## # … with 24,645 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#bargraphs
tfidf_mathbooks %&amp;gt;% 
  group_by(title) %&amp;gt;% 
  top_n(15, tf_idf) %&amp;gt;% 
  ungroup() %&amp;gt;%
  mutate(word = reorder(word, tf_idf)) %&amp;gt;%
  ggplot(aes(word, tf_idf, fill = title)) +
  geom_col(show.legend = FALSE) +
  labs(x = NULL, y = &amp;quot;tf-idf&amp;quot;) +
  facet_wrap(~title, ncol = 2, scales = &amp;quot;free&amp;quot;) +
  coord_flip() + ggtitle(&amp;quot;Bargraphs of top 15 words&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-06-09-sentiment-analysis.en/2020-06-09-sentiment-analysis.en_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Amusements in Mathematics - This book appears to be related to solving puzzle and game.&lt;/p&gt;
&lt;p&gt;An Elementary Course in Synthetic Projective Geometry- It appears to be related to book about measuring angle and point, probably involve a lot of theories.&lt;/p&gt;
&lt;p&gt;The Earliest Arithmetics in English - The terms are interesting. The words in various langauge in original form.&lt;/p&gt;
&lt;p&gt;The Number Concept: Its Origin and Development - It appears to be related how counting and numbering originated. It is probably indicating use of fingers by tribes for counting.&lt;/p&gt;
&lt;p&gt;*&lt;strong&gt;Same analysis using bigrams.&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# bigrams for the math books from previous problem
math_bigrams &amp;lt;-  math_books %&amp;gt;%
unnest_tokens(bigram, text, token = &amp;quot;ngrams&amp;quot;, n = 2)
math_bigrams&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 304,593 x 3
##    gutenberg_id title                                          bigram           
##           &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;                                          &amp;lt;chr&amp;gt;            
##  1        16449 The Number Concept: Its Origin and Development transcriber&amp;#39;s no…
##  2        16449 The Number Concept: Its Origin and Development note the         
##  3        16449 The Number Concept: Its Origin and Development the following    
##  4        16449 The Number Concept: Its Origin and Development following errors 
##  5        16449 The Number Concept: Its Origin and Development errors found     
##  6        16449 The Number Concept: Its Origin and Development found in         
##  7        16449 The Number Concept: Its Origin and Development in the           
##  8        16449 The Number Concept: Its Origin and Development the original     
##  9        16449 The Number Concept: Its Origin and Development original have    
## 10        16449 The Number Concept: Its Origin and Development have been        
## # … with 304,583 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# count bigrams
math_bigrams %&amp;gt;% count(bigram, sort = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 126,537 x 2
##    bigram       n
##    &amp;lt;chr&amp;gt;    &amp;lt;int&amp;gt;
##  1 of the    2866
##  2 in the    1850
##  3 o o       1044
##  4 to the     847
##  5 it is      758
##  6 and the    756
##  7 on the     677
##  8 the same   638
##  9 that the   627
## 10 to be      554
## # … with 126,527 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# separate and filter stop words
mathbigrams_separated &amp;lt;- math_bigrams %&amp;gt;%
separate(bigram, c(&amp;quot;word1&amp;quot;, &amp;quot;word2&amp;quot;), sep = &amp;quot; &amp;quot;)

mathbigrams_filtered &amp;lt;- mathbigrams_separated %&amp;gt;%
  filter(!word1 %in% stop_words$word) %&amp;gt;%
  filter(!word2 %in% stop_words$word)

# new bigram counts
bigram_counts &amp;lt;- mathbigrams_filtered %&amp;gt;% 
  count(word1, word2, sort = TRUE)
bigram_counts&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 38,184 x 3
##    word1 word2     n
##    &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt;
##  1 1     2       217
##  2 2     3       176
##  3 3     4       167
##  4 4     5       123
##  5 2     1       114
##  6 5     6       113
##  7 ou    er      111
##  8 1     7       103
##  9 2     2       101
## 10 2     8       101
## # … with 38,174 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#combine filtered words to form bigrams 
mathbigrams_united &amp;lt;- mathbigrams_filtered %&amp;gt;%
  unite(bigram, word1, word2, sep = &amp;quot; &amp;quot;)
mathbigrams_united&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 56,991 x 3
##    gutenberg_id title                                          bigram           
##           &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;                                          &amp;lt;chr&amp;gt;            
##  1        16449 The Number Concept: Its Origin and Development transcriber&amp;#39;s no…
##  2        16449 The Number Concept: Its Origin and Development errors found     
##  3        16449 The Number Concept: Its Origin and Development 14th paragraph   
##  4        16449 The Number Concept: Its Origin and Development paragraph drop   
##  5        16449 The Number Concept: Its Origin and Development drop double      
##  6        16449 The Number Concept: Its Origin and Development double quote     
##  7        16449 The Number Concept: Its Origin and Development chapter iv       
##  8        16449 The Number Concept: Its Origin and Development iv 1st           
##  9        16449 The Number Concept: Its Origin and Development 1st paragraph    
## 10        16449 The Number Concept: Its Origin and Development chapter iv       
## # … with 56,981 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bigram_tf_idf &amp;lt;- mathbigrams_united %&amp;gt;%
  count(title, bigram) %&amp;gt;%
  bind_tf_idf(bigram, title, n) %&amp;gt;%
  arrange(desc(tf_idf))
bigram_tf_idf&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 38,958 x 6
##    title                                  bigram         n      tf   idf  tf_idf
##    &amp;lt;chr&amp;gt;                                  &amp;lt;chr&amp;gt;      &amp;lt;int&amp;gt;   &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt;
##  1 The Earliest Arithmetics in English    ou er        111 0.00929  1.39 0.0129 
##  2 The Earliest Arithmetics in English    fig ur        86 0.00720  1.39 0.00998
##  3 An Elementary Course in Synthetic Pro… _a_ _b_       31 0.00576  1.39 0.00799
##  4 The Earliest Arithmetics in English    ne er         58 0.00485  1.39 0.00673
##  5 An Elementary Course in Synthetic Pro… _b_ _c_       26 0.00483  1.39 0.00670
##  6 An Elementary Course in Synthetic Pro… line join…    22 0.00409  1.39 0.00567
##  7 The Number Concept: Its Origin and De… _op cit       70 0.00397  1.39 0.00550
##  8 An Elementary Course in Synthetic Pro… letter ga…    21 0.00390  1.39 0.00541
##  9 The Earliest Arithmetics in English    aft er        46 0.00385  1.39 0.00534
## 10 The Earliest Arithmetics in English    eu er         46 0.00385  1.39 0.00534
## # … with 38,948 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#bargraphs
bigram_tf_idf %&amp;gt;% 
  group_by(title) %&amp;gt;% 
  top_n(15, tf_idf) %&amp;gt;% 
  ungroup() %&amp;gt;%
  mutate(bigram=reorder(bigram, tf_idf)) %&amp;gt;%
  ggplot(aes(bigram, tf_idf, fill = title)) +
  geom_col(show.legend = FALSE) +
  labs(x = NULL, y = &amp;quot;tf-idf&amp;quot;) +
  facet_wrap(~title, ncol = 2, scales = &amp;quot;free&amp;quot;) +
  coord_flip() + ggtitle(&amp;quot;Bargraphs of top 15 bigrams&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-06-09-sentiment-analysis.en/2020-06-09-sentiment-analysis.en_files/figure-html/unnamed-chunk-11-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;sentiment-analysis-on-the-songs-from-genius&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Sentiment analysis on the songs from Genius&lt;/h3&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Aerosmith - I don’t want to miss a thing&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#get song lyrics
aero_smith_i_don &amp;lt;- genius_lyrics(artist = &amp;quot;Aerosmith&amp;quot;, song = &amp;quot; I don&amp;#39;t want to miss a thing&amp;quot;)
aero_smith_i_don&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 59 x 3
##    track_title                line lyric                                        
##    &amp;lt;chr&amp;gt;                     &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;                                        
##  1 I Don’t Want to Miss a T…     1 I could stay awake just to hear you breathin&amp;#39;
##  2 I Don’t Want to Miss a T…     2 Watch you smile while you are sleeping       
##  3 I Don’t Want to Miss a T…     3 While you&amp;#39;re far away and dreaming           
##  4 I Don’t Want to Miss a T…     4 I could spend my life in this sweet surrender
##  5 I Don’t Want to Miss a T…     5 I could stay lost in this moment forever     
##  6 I Don’t Want to Miss a T…     6 Where every moment spent with you is a momen…
##  7 I Don’t Want to Miss a T…     7 Don&amp;#39;t want to close my eyes                  
##  8 I Don’t Want to Miss a T…     8 I don&amp;#39;t want to fall asleep                  
##  9 I Don’t Want to Miss a T…     9 &amp;#39;Cause I&amp;#39;d miss you, baby                    
## 10 I Don’t Want to Miss a T…    10 And I don&amp;#39;t wanna miss a thing               
## # … with 49 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#tidy up lyrics
i_dont_tidy &amp;lt;- aero_smith_i_don  %&amp;gt;% select(lyric, track_title) %&amp;gt;% unnest_tokens(word, lyric)
i_dont_tidy&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 390 x 2
##    track_title                  word    
##    &amp;lt;chr&amp;gt;                        &amp;lt;chr&amp;gt;   
##  1 I Don’t Want to Miss a Thing i       
##  2 I Don’t Want to Miss a Thing could   
##  3 I Don’t Want to Miss a Thing stay    
##  4 I Don’t Want to Miss a Thing awake   
##  5 I Don’t Want to Miss a Thing just    
##  6 I Don’t Want to Miss a Thing to      
##  7 I Don’t Want to Miss a Thing hear    
##  8 I Don’t Want to Miss a Thing you     
##  9 I Don’t Want to Miss a Thing breathin
## 10 I Don’t Want to Miss a Thing watch   
## # … with 380 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# join with sentiment lexicon
i_dont_sentiments&amp;lt;- i_dont_tidy%&amp;gt;%
inner_join(get_sentiments(&amp;quot;bing&amp;quot;), by = c(word = &amp;quot;word&amp;quot;))
i_dont_sentiments&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 35 x 3
##    track_title                  word      sentiment
##    &amp;lt;chr&amp;gt;                        &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;    
##  1 I Don’t Want to Miss a Thing smile     positive 
##  2 I Don’t Want to Miss a Thing sweet     positive 
##  3 I Don’t Want to Miss a Thing surrender negative 
##  4 I Don’t Want to Miss a Thing lost      negative 
##  5 I Don’t Want to Miss a Thing treasure  positive 
##  6 I Don’t Want to Miss a Thing fall      negative 
##  7 I Don’t Want to Miss a Thing miss      negative 
##  8 I Don’t Want to Miss a Thing miss      negative 
##  9 I Don’t Want to Miss a Thing miss      negative 
## 10 I Don’t Want to Miss a Thing miss      negative 
## # … with 25 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#bargraph word-sentiment
i_dont_sentiments %&amp;gt;%
  count(sentiment, word) %&amp;gt;%
  ungroup() %&amp;gt;%
  mutate(n = ifelse(sentiment == &amp;quot;negative&amp;quot;, -n, n)) %&amp;gt;%
  mutate(word = reorder(word, n)) %&amp;gt;%
  ggplot(aes(word, n, fill = sentiment)) +
  geom_bar(stat = &amp;quot;identity&amp;quot;) +
  ylab(&amp;quot;Contribution to sentiment&amp;quot;) +
  coord_flip()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-06-09-sentiment-analysis.en/2020-06-09-sentiment-analysis.en_files/figure-html/unnamed-chunk-15-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;The Weeknd - Earned It&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;the_weeknd_earned_it &amp;lt;- genius_lyrics(artist = &amp;quot;The Weeknd&amp;quot;, song = &amp;quot;Earned It&amp;quot;)
the_weeknd_earned_it&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 51 x 3
##    track_title                     line lyric                                   
##    &amp;lt;chr&amp;gt;                          &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;                                   
##  1 Earned It (Fifty Shades of Gr…     1 I&amp;#39;ma care for you                       
##  2 Earned It (Fifty Shades of Gr…     2 I&amp;#39;ma care for you, you, you, you        
##  3 Earned It (Fifty Shades of Gr…     3 You make it look like it&amp;#39;s magic (Oh ye…
##  4 Earned It (Fifty Shades of Gr…     4 &amp;#39;Cause I see nobody, nobody but you, yo…
##  5 Earned It (Fifty Shades of Gr…     5 I&amp;#39;m never confused                      
##  6 Earned It (Fifty Shades of Gr…     6 Hey, hey                                
##  7 Earned It (Fifty Shades of Gr…     7 I&amp;#39;m so used to bein&amp;#39; used               
##  8 Earned It (Fifty Shades of Gr…     8 So I love when you call unexpected      
##  9 Earned It (Fifty Shades of Gr…     9 &amp;#39;Cause I hate when the moment&amp;#39;s expected
## 10 Earned It (Fifty Shades of Gr…    10 So I&amp;#39;ma care for you, you, you          
## # … with 41 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;earned_it_tidy &amp;lt;- the_weeknd_earned_it  %&amp;gt;% select(lyric, track_title) %&amp;gt;% unnest_tokens(word, lyric)
earned_it_tidy&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 325 x 2
##    track_title                      word 
##    &amp;lt;chr&amp;gt;                            &amp;lt;chr&amp;gt;
##  1 Earned It (Fifty Shades of Grey) i&amp;#39;ma 
##  2 Earned It (Fifty Shades of Grey) care 
##  3 Earned It (Fifty Shades of Grey) for  
##  4 Earned It (Fifty Shades of Grey) you  
##  5 Earned It (Fifty Shades of Grey) i&amp;#39;ma 
##  6 Earned It (Fifty Shades of Grey) care 
##  7 Earned It (Fifty Shades of Grey) for  
##  8 Earned It (Fifty Shades of Grey) you  
##  9 Earned It (Fifty Shades of Grey) you  
## 10 Earned It (Fifty Shades of Grey) you  
## # … with 315 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;earned_it_sentiments&amp;lt;- earned_it_tidy%&amp;gt;%
inner_join(get_sentiments(&amp;quot;bing&amp;quot;), by = c(word = &amp;quot;word&amp;quot;))
earned_it_sentiments&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 36 x 3
##    track_title                      word       sentiment
##    &amp;lt;chr&amp;gt;                            &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;    
##  1 Earned It (Fifty Shades of Grey) like       positive 
##  2 Earned It (Fifty Shades of Grey) magic      positive 
##  3 Earned It (Fifty Shades of Grey) confused   negative 
##  4 Earned It (Fifty Shades of Grey) love       positive 
##  5 Earned It (Fifty Shades of Grey) unexpected negative 
##  6 Earned It (Fifty Shades of Grey) hate       negative 
##  7 Earned It (Fifty Shades of Grey) perfect    positive 
##  8 Earned It (Fifty Shades of Grey) worth      positive 
##  9 Earned It (Fifty Shades of Grey) work       positive 
## 10 Earned It (Fifty Shades of Grey) love       positive 
## # … with 26 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;earned_it_sentiments %&amp;gt;%
  count(sentiment, word) %&amp;gt;%
  ungroup() %&amp;gt;%
  mutate(n = ifelse(sentiment == &amp;quot;negative&amp;quot;, -n, n)) %&amp;gt;%
  mutate(word = reorder(word, n)) %&amp;gt;%
  ggplot(aes(word, n, fill = sentiment)) +
  geom_bar(stat = &amp;quot;identity&amp;quot;) +
  ylab(&amp;quot;Contribution to sentiment&amp;quot;) +
  coord_flip()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-06-09-sentiment-analysis.en/2020-06-09-sentiment-analysis.en_files/figure-html/unnamed-chunk-19-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Pharrell Williams - Happy&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pharrell_will_happy &amp;lt;- genius_lyrics(artist = &amp;quot;Pharrell Williams&amp;quot;, song = &amp;quot;Happy&amp;quot;)
pharrell_will_happy&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 67 x 3
##    track_title  line lyric                                             
##    &amp;lt;chr&amp;gt;       &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;                                             
##  1 Happy           1 &amp;lt;NA&amp;gt;                                              
##  2 Happy           2 It might seem crazy what I&amp;#39;m &amp;#39;bout to say         
##  3 Happy           3 Sunshine she&amp;#39;s here, you can take a break         
##  4 Happy           4 I&amp;#39;m a hot air balloon that could go to space      
##  5 Happy           5 With the air, like I don&amp;#39;t care, baby, by the way 
##  6 Happy           6 (Because I&amp;#39;m happy)                               
##  7 Happy           7 Clap along if you feel like a room without a roof 
##  8 Happy           8 (Because I&amp;#39;m happy)                               
##  9 Happy           9 Clap along if you feel like happiness is the truth
## 10 Happy          10 (Because I&amp;#39;m happy)                               
## # … with 57 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;happy_tidy &amp;lt;- pharrell_will_happy  %&amp;gt;% select(lyric, track_title) %&amp;gt;% unnest_tokens(word, lyric)
happy_tidy&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 473 x 2
##    track_title word 
##    &amp;lt;chr&amp;gt;       &amp;lt;chr&amp;gt;
##  1 Happy       &amp;lt;NA&amp;gt; 
##  2 Happy       it   
##  3 Happy       might
##  4 Happy       seem 
##  5 Happy       crazy
##  6 Happy       what 
##  7 Happy       i&amp;#39;m  
##  8 Happy       bout 
##  9 Happy       to   
## 10 Happy       say  
## # … with 463 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;happy_sentiments&amp;lt;- happy_tidy%&amp;gt;%
inner_join(get_sentiments(&amp;quot;bing&amp;quot;), by = c(word = &amp;quot;word&amp;quot;))
happy_sentiments&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 63 x 3
##    track_title word      sentiment
##    &amp;lt;chr&amp;gt;       &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;    
##  1 Happy       crazy     negative 
##  2 Happy       break     negative 
##  3 Happy       hot       positive 
##  4 Happy       like      positive 
##  5 Happy       happy     positive 
##  6 Happy       like      positive 
##  7 Happy       happy     positive 
##  8 Happy       like      positive 
##  9 Happy       happiness positive 
## 10 Happy       happy     positive 
## # … with 53 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;happy_sentiments %&amp;gt;%
  count(sentiment, word) %&amp;gt;%
  ungroup() %&amp;gt;%
  mutate(n = ifelse(sentiment == &amp;quot;negative&amp;quot;, -n, n)) %&amp;gt;%
  mutate(word = reorder(word, n)) %&amp;gt;%
  ggplot(aes(word, n, fill = sentiment)) +
  geom_bar(stat = &amp;quot;identity&amp;quot;) +
  ylab(&amp;quot;Contribution to sentiment&amp;quot;) +
  coord_flip()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-06-09-sentiment-analysis.en/2020-06-09-sentiment-analysis.en_files/figure-html/unnamed-chunk-23-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Summertime Sadness – Lana Del Rey&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt; Summertime_Sadness &amp;lt;- genius_lyrics(artist = &amp;quot;Lana Del Rey&amp;quot;, song = &amp;quot;Summertime Sadness&amp;quot;)
Summertime_Sadness&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 54 x 3
##    track_title         line lyric                                          
##    &amp;lt;chr&amp;gt;              &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;                                          
##  1 Summertime Sadness     1 Kiss me hard before you go                     
##  2 Summertime Sadness     2 Summertime sadness                             
##  3 Summertime Sadness     3 I just wanted you to know                      
##  4 Summertime Sadness     4 That, baby, you&amp;#39;re the best                    
##  5 Summertime Sadness     5 I got my red dress on tonight                  
##  6 Summertime Sadness     6 Dancin&amp;#39; in the dark in the pale moonlight      
##  7 Summertime Sadness     7 Done my hair up real big, beauty queen style   
##  8 Summertime Sadness     8 High heels off, I&amp;#39;m feelin&amp;#39; alive              
##  9 Summertime Sadness     9 Oh, my God, I feel it in the air               
## 10 Summertime Sadness    10 Telephone wires above are sizzlin&amp;#39; like a snare
## # … with 44 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;Summertime_Sadness_tidy &amp;lt;- Summertime_Sadness %&amp;gt;% select(lyric, track_title) %&amp;gt;% unnest_tokens(word, lyric)
Summertime_Sadness_tidy&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 312 x 2
##    track_title        word      
##    &amp;lt;chr&amp;gt;              &amp;lt;chr&amp;gt;     
##  1 Summertime Sadness kiss      
##  2 Summertime Sadness me        
##  3 Summertime Sadness hard      
##  4 Summertime Sadness before    
##  5 Summertime Sadness you       
##  6 Summertime Sadness go        
##  7 Summertime Sadness summertime
##  8 Summertime Sadness sadness   
##  9 Summertime Sadness i         
## 10 Summertime Sadness just      
## # … with 302 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;Summertime_Sadness_sentiments&amp;lt;- Summertime_Sadness_tidy%&amp;gt;%
inner_join(get_sentiments(&amp;quot;bing&amp;quot;), by = c(word = &amp;quot;word&amp;quot;))
Summertime_Sadness_sentiments&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 39 x 3
##    track_title        word    sentiment
##    &amp;lt;chr&amp;gt;              &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;    
##  1 Summertime Sadness hard    negative 
##  2 Summertime Sadness sadness negative 
##  3 Summertime Sadness best    positive 
##  4 Summertime Sadness dark    negative 
##  5 Summertime Sadness pale    negative 
##  6 Summertime Sadness beauty  positive 
##  7 Summertime Sadness like    positive 
##  8 Summertime Sadness snare   negative 
##  9 Summertime Sadness hard    negative 
## 10 Summertime Sadness sadness negative 
## # … with 29 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;Summertime_Sadness_sentiments %&amp;gt;%
  count(sentiment, word) %&amp;gt;%
  ungroup() %&amp;gt;%
  mutate(n = ifelse(sentiment == &amp;quot;negative&amp;quot;, -n, n)) %&amp;gt;%
  mutate(word = reorder(word, n)) %&amp;gt;%
  ggplot(aes(word, n, fill = sentiment)) +
  geom_bar(stat = &amp;quot;identity&amp;quot;) +
  ylab(&amp;quot;Contribution to sentiment&amp;quot;) +
  coord_flip()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-06-09-sentiment-analysis.en/2020-06-09-sentiment-analysis.en_files/figure-html/unnamed-chunk-27-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Topic Modeling</title>
      <link>/post/r-markdown/</link>
      <pubDate>Tue, 09 Jun 2020 00:00:00 +0000</pubDate>
      <guid>/post/r-markdown/</guid>
      <description>


&lt;p&gt;For this project, I am selecting four books from Project Gutenberg library from sub-categories: Crime, Music, Astronomy and Revolution. The purpose of the project is to perform topic modeling using LDA algorithm to see whether it can correctly distinguish the four groups.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Topic modeling&lt;/strong&gt; is an unsupervised machine learning technique for text data. It scans a set of documents(book chapters in this case), detecting word and phrase patterns within them, and clustering word groups and similar expressions that best characterize a set of documents.&lt;strong&gt;Latent Dirichlet Allocation (LDA)&lt;/strong&gt; is an example of topic modeling algorithm used to cluster text in a document to a particular topic. It is guided by two principles - every document is a mixture of topics and every topic is a mixture of words.&lt;/p&gt;
&lt;p&gt;Step-by-step explanations are as follows:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(pacman)
p_load(topicmodels,gutenbergr,tidyverse,tidytext,stringr,scales)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;1.Book Titles&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# four books for topic models
titles &amp;lt;- c(&amp;quot;Buccaneers and Pirates of Our Coasts&amp;quot;, &amp;quot;Beethoven&amp;quot;, &amp;quot;Astronomy for Amateurs&amp;quot;,&amp;quot;The Psychology of Revolution&amp;quot;)
titles&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Buccaneers and Pirates of Our Coasts&amp;quot;
## [2] &amp;quot;Beethoven&amp;quot;                           
## [3] &amp;quot;Astronomy for Amateurs&amp;quot;              
## [4] &amp;quot;The Psychology of Revolution&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# retrieve books from gutenbergr
books &amp;lt;- gutenberg_download(c(448,15141,25267,17188), meta_fields = &amp;quot;title&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;2.Pre-Processing&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# divide into documents, each representing one chapter
by_chapter &amp;lt;- books %&amp;gt;%
  group_by(title) %&amp;gt;%
  mutate(chapter = cumsum(str_detect(text, regex(&amp;quot;^chapter &amp;quot;, ignore_case = TRUE)))) %&amp;gt;%
  ungroup() %&amp;gt;%
  filter(chapter &amp;gt; 0) %&amp;gt;%
  unite(document, title, chapter)

# split into words
by_chapter_word &amp;lt;- by_chapter %&amp;gt;%
  unnest_tokens(word, text)

# find document-word counts
word_counts &amp;lt;- by_chapter_word %&amp;gt;%
  anti_join(stop_words) %&amp;gt;%
  count(document, word, sort = TRUE) %&amp;gt;%
  ungroup()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Joining, by = &amp;quot;word&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;word_counts&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 67,284 x 3
##    document                                                       word         n
##    &amp;lt;chr&amp;gt;                                                          &amp;lt;chr&amp;gt;    &amp;lt;int&amp;gt;
##  1 &amp;quot;Beethoven, a character study\r\nTogether with Wagner&amp;#39;s indeb… beethov…    87
##  2 Astronomy for Amateurs_11                                      distance    77
##  3 Astronomy for Amateurs_4                                       sun         66
##  4 Astronomy for Amateurs_9                                       moon        64
##  5 Astronomy for Amateurs_3                                       stars       63
##  6 Astronomy for Amateurs_11                                      sun         58
##  7 Astronomy for Amateurs_8                                       earth       56
##  8 Astronomy for Amateurs_10                                      sun         54
##  9 Astronomy for Amateurs_2                                       stars       53
## 10 The Psychology of Revolution_53                                revolut…    52
## # … with 67,274 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;3.LDA on Chapters&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# convert tidy data to document term matrix
chapters_dtm &amp;lt;- word_counts %&amp;gt;% cast_dtm(document, word, n)
chapters_dtm&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## &amp;lt;&amp;lt;DocumentTermMatrix (documents: 117, terms: 16265)&amp;gt;&amp;gt;
## Non-/sparse entries: 67284/1835721
## Sparsity           : 96%
## Maximal term length: 41
## Weighting          : term frequency (tf)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# create topic model with LDA function for four books, k = 4
chapters_lda &amp;lt;- LDA(chapters_dtm, k = 4, control = list(seed = 1999))
chapters_lda&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## A LDA_VEM topic model with 4 topics.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#per-topic-per-word probabilities : beta
chapter_topics &amp;lt;- tidy(chapters_lda, matrix = &amp;quot;beta&amp;quot;)
chapter_topics&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 65,060 x 3
##    topic term           beta
##    &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;         &amp;lt;dbl&amp;gt;
##  1     1 beethoven 6.55e-135
##  2     2 beethoven 4.39e- 18
##  3     3 beethoven 1.34e-132
##  4     4 beethoven 2.09e-  2
##  5     1 distance  7.99e-  4
##  6     2 distance  9.49e-  5
##  7     3 distance  7.75e-  3
##  8     4 distance  7.62e-  5
##  9     1 sun       8.19e-  5
## 10     2 sun       3.16e-  5
## # … with 65,050 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For example, the term “beethoven” has zero probability of being generated from topics 1, 3, or 4, but it makes up 2% of topic 2.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# top 10 terms in each topic
top_terms &amp;lt;- chapter_topics %&amp;gt;% group_by(topic) %&amp;gt;%
  top_n(10, beta) %&amp;gt;% ungroup() %&amp;gt;%
  arrange(topic, -beta)
top_terms&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 40 x 3
##    topic term          beta
##    &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;        &amp;lt;dbl&amp;gt;
##  1     1 pirate     0.0117 
##  2     1 pirates    0.0108 
##  3     1 town       0.00865
##  4     1 vessel     0.00851
##  5     1 ship       0.00733
##  6     1 buccaneers 0.00622
##  7     1 time       0.00606
##  8     1 captain    0.00602
##  9     1 spanish    0.00585
## 10     1 people     0.00483
## # … with 30 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# visualize top terms from each topic
top_terms %&amp;gt;% mutate(term = reorder_within(term, beta, topic)) %&amp;gt;%
  ggplot(aes(term, beta, fill = factor(topic))) +
  geom_col(show.legend = F) + facet_wrap(~topic, scales = &amp;quot;free&amp;quot;) +
  coord_flip() + scale_x_reordered() + 
  labs(caption = &amp;quot;Fig:The terms that are most common within each topic&amp;quot;) + theme(plot.caption = element_text(hjust = 0.5, size = 10))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/topic-modeling/index_files/figure-html/unnamed-chunk-9-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;The topics are clearly associated with the four books.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.Per-document Classification&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#per-document-per-topic probabilities: gamma
chapters_gamma &amp;lt;- tidy(chapters_lda, matrix = &amp;quot;gamma&amp;quot;)
chapters_gamma&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 468 x 3
##    document                                                      topic     gamma
##    &amp;lt;chr&amp;gt;                                                         &amp;lt;int&amp;gt;     &amp;lt;dbl&amp;gt;
##  1 &amp;quot;Beethoven, a character study\r\nTogether with Wagner&amp;#39;s inde…     1   4.05e-6
##  2 Astronomy for Amateurs_11                                         1   7.54e-6
##  3 Astronomy for Amateurs_4                                          1   9.32e-6
##  4 Astronomy for Amateurs_9                                          1   1.05e-5
##  5 Astronomy for Amateurs_3                                          1   8.14e-6
##  6 Astronomy for Amateurs_8                                          1   8.58e-6
##  7 Astronomy for Amateurs_10                                         1   8.42e-6
##  8 Astronomy for Amateurs_2                                          1   9.93e-6
##  9 The Psychology of Revolution_53                                   1   7.75e-6
## 10 Buccaneers and Pirates of Our Coasts_33                           1  10.00e-1
## # … with 458 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Astronomy for Amateurs_11 document has 0% probability of coming from topic 1(Buccaneers and Pirates of Our Coasts).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#separate out chapter and title
chapters_gamma &amp;lt;- chapters_gamma %&amp;gt;%
  separate(document, c(&amp;quot;title&amp;quot;, &amp;quot;chapter&amp;quot;), sep= &amp;quot;_&amp;quot;, convert = TRUE)
chapters_gamma&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 468 x 4
##    title                                                 chapter topic     gamma
##    &amp;lt;chr&amp;gt;                                                   &amp;lt;int&amp;gt; &amp;lt;int&amp;gt;     &amp;lt;dbl&amp;gt;
##  1 &amp;quot;Beethoven, a character study\r\nTogether with Wagne…      19     1   4.05e-6
##  2 Astronomy for Amateurs                                     11     1   7.54e-6
##  3 Astronomy for Amateurs                                      4     1   9.32e-6
##  4 Astronomy for Amateurs                                      9     1   1.05e-5
##  5 Astronomy for Amateurs                                      3     1   8.14e-6
##  6 Astronomy for Amateurs                                      8     1   8.58e-6
##  7 Astronomy for Amateurs                                     10     1   8.42e-6
##  8 Astronomy for Amateurs                                      2     1   9.93e-6
##  9 The Psychology of Revolution                               53     1   7.75e-6
## 10 Buccaneers and Pirates of Our Coasts                       33     1  10.00e-1
## # … with 458 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# reorder titles and plot
chapters_gamma %&amp;gt;% mutate(title = reorder(title, gamma*topic)) %&amp;gt;%
  ggplot(aes(factor(topic),gamma)) + geom_boxplot() + facet_wrap(~title) +
  labs(caption = &amp;quot;Fig: The gamma probabilities for each chapter within each book&amp;quot;) + theme(plot.caption = element_text(hjust = 0.5, size = 12))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/topic-modeling/index_files/figure-html/unnamed-chunk-12-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;It appears all of the chapters are uniquely identified as a single topic.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#topic most associated with a chapter 
chapter_classifications &amp;lt;- chapters_gamma %&amp;gt;%
  group_by(title, chapter) %&amp;gt;% top_n(1, gamma) %&amp;gt;%
  ungroup()
chapter_classifications&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 117 x 4
##    title                                chapter topic gamma
##    &amp;lt;chr&amp;gt;                                  &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt;
##  1 Buccaneers and Pirates of Our Coasts      33     1 1.000
##  2 Buccaneers and Pirates of Our Coasts      11     1 1.000
##  3 Buccaneers and Pirates of Our Coasts      31     1 1.000
##  4 Buccaneers and Pirates of Our Coasts      32     1 0.981
##  5 Buccaneers and Pirates of Our Coasts      30     1 1.000
##  6 Buccaneers and Pirates of Our Coasts      20     1 1.000
##  7 Buccaneers and Pirates of Our Coasts      21     1 1.000
##  8 Buccaneers and Pirates of Our Coasts      23     1 1.000
##  9 Buccaneers and Pirates of Our Coasts      15     1 1.000
## 10 Buccaneers and Pirates of Our Coasts      16     1 1.000
## # … with 107 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# consensus topics
book_topics &amp;lt;- chapter_classifications %&amp;gt;% count(title, topic) %&amp;gt;%
  group_by(title) %&amp;gt;% top_n(1,n) %&amp;gt;% ungroup() %&amp;gt;%
  transmute(consensus = title, topic)
book_topics%&amp;gt;% arrange((topic))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 4 x 2
##   consensus                                                                topic
##   &amp;lt;chr&amp;gt;                                                                    &amp;lt;int&amp;gt;
## 1 Buccaneers and Pirates of Our Coasts                                         1
## 2 The Psychology of Revolution                                                 2
## 3 Astronomy for Amateurs                                                       3
## 4 &amp;quot;Beethoven, a character study\r\nTogether with Wagner&amp;#39;s indebtedness to…     4&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#misidentified topics
chapter_classifications %&amp;gt;% inner_join(book_topics, by = &amp;quot;topic&amp;quot;) %&amp;gt;%
  filter(title != consensus)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 0 x 5
## # … with 5 variables: title &amp;lt;chr&amp;gt;, chapter &amp;lt;int&amp;gt;, topic &amp;lt;int&amp;gt;, gamma &amp;lt;dbl&amp;gt;,
## #   consensus &amp;lt;chr&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Indeed, no chapters were mis-classified.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5.By Word Assignments: Augment&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# see which words are assigned to which topic with augment function
assignments &amp;lt;- augment(chapters_lda, data = chapters_dtm)
assignments&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 67,284 x 4
##    document                                                 term    count .topic
##    &amp;lt;chr&amp;gt;                                                    &amp;lt;chr&amp;gt;   &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;
##  1 &amp;quot;Beethoven, a character study\r\nTogether with Wagner&amp;#39;s… beetho…    87      4
##  2 &amp;quot;Beethoven, a character study\r\nTogether with Wagner&amp;#39;s… beetho…    45      4
##  3 &amp;quot;Beethoven, a character study\r\nTogether with Wagner&amp;#39;s… beetho…    44      4
##  4 &amp;quot;Beethoven, a character study\r\nTogether with Wagner&amp;#39;s… beetho…    43      4
##  5 &amp;quot;Beethoven, a character study\r\nTogether with Wagner&amp;#39;s… beetho…    43      4
##  6 &amp;quot;Beethoven, a character study\r\nTogether with Wagner&amp;#39;s… beetho…    39      4
##  7 &amp;quot;Beethoven, a character study\r\nTogether with Wagner&amp;#39;s… beetho…    38      4
##  8 &amp;quot;Beethoven, a character study\r\nTogether with Wagner&amp;#39;s… beetho…    28      4
##  9 &amp;quot;Beethoven, a character study\r\nTogether with Wagner&amp;#39;s… beetho…    25      4
## 10 &amp;quot;Beethoven, a character study\r\nTogether with Wagner&amp;#39;s… beetho…    24      4
## # … with 67,274 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# combine assignments with true book titles to find incorrect classification
assignments &amp;lt;- assignments %&amp;gt;% 
  separate(document, c(&amp;quot;title&amp;quot;, &amp;quot;chapter&amp;quot;), sep = &amp;quot;_&amp;quot;, convert = TRUE)%&amp;gt;%
  inner_join(book_topics, by = c(&amp;quot;.topic&amp;quot; = &amp;quot;topic&amp;quot;))
assignments&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 67,284 x 6
##    title                   chapter term   count .topic consensus                
##    &amp;lt;chr&amp;gt;                     &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;                    
##  1 &amp;quot;Beethoven, a characte…      19 beeth…    87      4 &amp;quot;Beethoven, a character …
##  2 &amp;quot;Beethoven, a characte…      13 beeth…    45      4 &amp;quot;Beethoven, a character …
##  3 &amp;quot;Beethoven, a characte…       8 beeth…    44      4 &amp;quot;Beethoven, a character …
##  4 &amp;quot;Beethoven, a characte…       1 beeth…    43      4 &amp;quot;Beethoven, a character …
##  5 &amp;quot;Beethoven, a characte…       6 beeth…    43      4 &amp;quot;Beethoven, a character …
##  6 &amp;quot;Beethoven, a characte…       2 beeth…    39      4 &amp;quot;Beethoven, a character …
##  7 &amp;quot;Beethoven, a characte…      10 beeth…    38      4 &amp;quot;Beethoven, a character …
##  8 &amp;quot;Beethoven, a characte…       5 beeth…    28      4 &amp;quot;Beethoven, a character …
##  9 &amp;quot;Beethoven, a characte…      11 beeth…    25      4 &amp;quot;Beethoven, a character …
## 10 &amp;quot;Beethoven, a characte…      14 beeth…    24      4 &amp;quot;Beethoven, a character …
## # … with 67,274 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#visualize a confusion matrix
assignments %&amp;gt;%
count(title, consensus, wt = count) %&amp;gt;%
group_by(title) %&amp;gt;%
mutate(percent = n / sum(n)) %&amp;gt;%
ggplot(aes(consensus, title, fill = percent)) +
geom_tile() + 
scale_fill_gradient2(high = &amp;quot;blue&amp;quot;, label = percent_format()) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 90, hjust = 1),
panel.grid = element_blank()) +
labs(x = &amp;quot;book words were assigned to&amp;quot;,
y = &amp;quot;book words came from&amp;quot;,
fill = &amp;quot;% of assignments&amp;quot;) + 
labs(caption = &amp;quot;Fig: Confusion matrix showing where LDA assigned the words from each book&amp;quot;) +
theme(plot.caption = element_text( size = 10),legend.key.size = unit(0.5, &amp;quot;cm&amp;quot;)) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/topic-modeling/index_files/figure-html/unnamed-chunk-18-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Almost all words were correctly assigned to each topic.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# most commonly mistaken words
wrong_words &amp;lt;- assignments %&amp;gt;% filter(title!= consensus)
wrong_words&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 45 x 6
##    title                   chapter term   count .topic consensus                
##    &amp;lt;chr&amp;gt;                     &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;                    
##  1 Buccaneers and Pirates…      32 moon       3      3 Astronomy for Amateurs   
##  2 Buccaneers and Pirates…      32 stars      2      3 Astronomy for Amateurs   
##  3 &amp;quot;Beethoven, a characte…       4 revol…     1      2 The Psychology of Revolu…
##  4 The Psychology of Revo…      45 capta…     1      1 Buccaneers and Pirates o…
##  5 The Psychology of Revo…      45 town       2      1 Buccaneers and Pirates o…
##  6 Buccaneers and Pirates…      32 heave…     1      3 Astronomy for Amateurs   
##  7 The Psychology of Revo…      45 vessel     1      1 Buccaneers and Pirates o…
##  8 &amp;quot;Beethoven, a characte…       4 armies     2      2 The Psychology of Revolu…
##  9 Buccaneers and Pirates…       1 1          1      4 &amp;quot;Beethoven, a character …
## 10 &amp;quot;Beethoven, a characte…       4 bonap…     3      2 The Psychology of Revolu…
## # … with 35 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;wrong_words %&amp;gt;% count(title, consensus, term , wt = count) %&amp;gt;% 
  ungroup() %&amp;gt;% arrange(-n)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 45 x 4
##    title                                    consensus               term       n
##    &amp;lt;chr&amp;gt;                                    &amp;lt;chr&amp;gt;                   &amp;lt;chr&amp;gt;  &amp;lt;dbl&amp;gt;
##  1 &amp;quot;Beethoven, a character study\r\nTogeth… The Psychology of Revo… france     6
##  2 &amp;quot;Beethoven, a character study\r\nTogeth… The Psychology of Revo… bonap…     3
##  3 Buccaneers and Pirates of Our Coasts     Astronomy for Amateurs  moon       3
##  4 &amp;quot;Beethoven, a character study\r\nTogeth… The Psychology of Revo… armies     2
##  5 &amp;quot;Beethoven, a character study\r\nTogeth… The Psychology of Revo… louis      2
##  6 Buccaneers and Pirates of Our Coasts     Astronomy for Amateurs  stars      2
##  7 The Psychology of Revolution             Buccaneers and Pirates… town       2
##  8 &amp;quot;Beethoven, a character study\r\nTogeth… The Psychology of Revo… equal…     1
##  9 &amp;quot;Beethoven, a character study\r\nTogeth… The Psychology of Revo… gover…     1
## 10 &amp;quot;Beethoven, a character study\r\nTogeth… The Psychology of Revo… illus…     1
## # … with 35 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The word “moon” and “stars” appear in “Buccaneers and Pirates of Our Coasts” but they are wrongly classified into “Astronomy for Amateurs” becuase they are more common in the later.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# wrongly classified word, eg. &amp;quot;moon&amp;quot;
word_counts %&amp;gt;% filter(word == &amp;quot;moon&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 12 x 3
##    document                                word      n
##    &amp;lt;chr&amp;gt;                                   &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt;
##  1 Astronomy for Amateurs_9                moon     64
##  2 Astronomy for Amateurs_10               moon     49
##  3 Astronomy for Amateurs_11               moon     35
##  4 Astronomy for Amateurs_4                moon     10
##  5 Astronomy for Amateurs_12               moon      9
##  6 Astronomy for Amateurs_5                moon      8
##  7 Astronomy for Amateurs_8                moon      4
##  8 Astronomy for Amateurs_3                moon      3
##  9 Astronomy for Amateurs_6                moon      3
## 10 Buccaneers and Pirates of Our Coasts_32 moon      3
## 11 Astronomy for Amateurs_1                moon      2
## 12 Astronomy for Amateurs_7                moon      2&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Although the words are presumably different for each topic since books are selected from different genre, LDA algorithm performed really well on identifying topics to the document and words to the topic. Really great for unsupervised clustering!&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Resume</title>
      <link>/resume/</link>
      <pubDate>Wed, 01 Jan 2020 00:00:00 +0000</pubDate>
      <guid>/resume/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Statebins</title>
      <link>/post/statebins/</link>
      <pubDate>Mon, 09 Dec 2019 21:13:14 -0500</pubDate>
      <guid>/post/statebins/</guid>
      <description>


&lt;p&gt;&lt;strong&gt;Statebins&lt;/strong&gt; are U.S. State Cartogram Heatmaps, alternative to Choropleth.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# load packages
library(pacman)
p_load(statebins,readxl,dplyr)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Statebins with 2018 Bachelor’s Degree or Higher by State (percent) data.&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# upload data
 data1 &amp;lt;- read_excel(&amp;quot;GeoFRED_Bachelor&amp;#39;s_Degree_or_Higher_by_State_Percent.xls&amp;quot;, skip = 1)
data1 %&amp;gt;% sample_n(5)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 5 x 4
##   `Series ID` State         Code  Year_2018
##   &amp;lt;chr&amp;gt;       &amp;lt;chr&amp;gt;         &amp;lt;chr&amp;gt;     &amp;lt;dbl&amp;gt;
## 1 GCT1502WA   Washington    53         36.7
## 2 GCT1502WV   West Virginia 54         21.3
## 3 GCT1502VA   Virginia      51         39.3
## 4 GCT1502AZ   Arizona       04         29.7
## 5 GCT1502HI   Hawaii        15         33.5&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# statebins
statebins_continuous(state_data = data1, state_col = &amp;quot;State&amp;quot;,
                     text_color = &amp;quot;white&amp;quot;, value_col = &amp;quot;Year_2018&amp;quot;,
                     brewer_pal=&amp;quot;Blues&amp;quot;, font_size = 3,
                     legend_title=&amp;quot;2018 Bachelor&amp;#39;s Degree or Higher by State (percent)&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/statebins/index_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Statebins with 2018 Median Household Income by State Data&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data2 &amp;lt;- read_excel(&amp;quot;GeoFRED_Median_Household_Income_by_State_Percent_Change.xls&amp;quot;, skip = 1)
data2 %&amp;gt;% sample_n(5)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 5 x 4
##   `Series ID`     State                Code  Year_2018
##   &amp;lt;chr&amp;gt;           &amp;lt;chr&amp;gt;                &amp;lt;chr&amp;gt;     &amp;lt;dbl&amp;gt;
## 1 MEHOINUSDCA646N District of Columbia 11         5.50
## 2 MEHOINUSVTA646N Vermont              50        10.0 
## 3 MEHOINUSPAA646N Pennsylvania         42         5.29
## 4 MEHOINUSNEA646N Nebraska             31        13.4 
## 5 MEHOINUSINA646N Indiana              18         1.91&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;statebins_continuous(state_data = data2, state_col = &amp;quot;State&amp;quot;,
                     text_color = &amp;quot;white&amp;quot;, value_col = &amp;quot;Year_2018&amp;quot;,
                     brewer_pal=&amp;quot;Greens&amp;quot;, font_size = 3,
                     legend_title=&amp;quot;
Median Household Income by State&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: `show_guide` has been deprecated. Please use `show.legend` instead.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/statebins/index_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Statebins with 2018 Resident Population by State (change, thousands of persons) Data&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data3 &amp;lt;- read_excel(&amp;quot;GeoFRED_Resident_Population_by_State_Change_Thousands_of_Persons.xls&amp;quot;, skip=1)
data3 %&amp;gt;% sample_n(5)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 5 x 4
##   `Series ID` State                Code  Year_2018
##   &amp;lt;chr&amp;gt;       &amp;lt;chr&amp;gt;                &amp;lt;chr&amp;gt;     &amp;lt;dbl&amp;gt;
## 1 TNPOP       Tennessee            47        61.2 
## 2 DCDIST5POP  District of Columbia 11         6.76
## 3 NEPOP       Nebraska             31        11.7 
## 4 AKPOP       Alaska               02        -2.35
## 5 TXPOP       Texas                48       379.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;statebins_continuous(state_data = data3, state_col = &amp;quot;State&amp;quot;,
                     text_color = &amp;quot;white&amp;quot;, value_col = &amp;quot;Year_2018&amp;quot;,
                     brewer_pal=&amp;quot;Reds&amp;quot;, font_size = 3, 
                     legend_title=&amp;quot;2018 Resident Population by State (change, thousands of persons) &amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: `show_guide` has been deprecated. Please use `show.legend` instead.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/statebins/index_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Choropleth Map</title>
      <link>/post/choropleth/</link>
      <pubDate>Mon, 18 Nov 2019 21:13:14 -0500</pubDate>
      <guid>/post/choropleth/</guid>
      <description>


&lt;p&gt;&lt;strong&gt;Choropleth&lt;/strong&gt; maps add color to states or countries relative to a variable.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(pacman)
p_load(tidyverse, choroplethr, choroplethrMaps,RColorBrewer)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;State Population&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data(df_pop_state)
pop_state &amp;lt;- df_pop_state %&amp;gt;% arrange(-(value))
top_n(pop_state,10)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Selecting by value&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##            region    value
## 1      california 37325068
## 2           texas 25208897
## 3        new york 19398125
## 4         florida 18885152
## 5        illinois 12823860
## 6    pennsylvania 12699589
## 7            ohio 11533561
## 8        michigan  9897264
## 9         georgia  9714569
## 10 north carolina  9544249&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;state_choropleth(df_pop_state, 
                 title  = &amp;quot;US 2012 State Population Estimates&amp;quot;, 
                 legend = &amp;quot;Population&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/choropleth/index_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;County Population&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data(df_pop_county)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;county_choropleth(df_pop_county,
                 title  = &amp;quot;US 2012 County Population Estimates&amp;quot;, 
                 legend = &amp;quot;Population&amp;quot;, num_colors = 8)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/choropleth/index_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;California Counties&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;county_choropleth(df_pop_county, 
                  title = &amp;quot;California County Population Estimates&amp;quot;, 
                  legend = &amp;quot;Population&amp;quot;,
                  state_zoom = &amp;quot;california&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/choropleth/index_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;State Demographics&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data(&amp;quot;df_state_demographics&amp;quot;)
head(df_state_demographics,10)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##                  region total_population percent_white percent_black
## 1               alabama          4799277            67            26
## 2                alaska           720316            63             3
## 3               arizona          6479703            57             4
## 4              arkansas          2933369            74            15
## 5            california         37659181            40             6
## 6              colorado          5119329            70             4
## 7           connecticut          3583561            70             9
## 8              delaware           908446            65            21
## 9  district of columbia           619371            35            49
## 10              florida         19091156            57            15
##    percent_asian percent_hispanic per_capita_income median_rent median_age
## 1              1                4             23680         501       38.1
## 2              5                6             32651         978       33.6
## 3              3               30             25358         747       36.3
## 4              1                7             22170         480       37.5
## 5             13               38             29527        1119       35.4
## 6              3               21             31109         825       36.1
## 7              4               14             37892         880       40.2
## 8              3                8             29819         828       38.9
## 9              3               10             45290        1154       33.8
## 10             2               23             26236         838       41.0&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# African American Population Distribution
df_state_demographics$value&amp;lt;- df_state_demographics$percent_black
state_choropleth(df_state_demographics, 
                 title  = &amp;quot;African American Population Distribution in US&amp;quot;, 
                 legend = &amp;quot;Population&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/choropleth/index_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# White Population Distribution
df_state_demographics$value&amp;lt;- df_state_demographics$percent_white
state_choropleth(df_state_demographics, 
                 title  = &amp;quot;White Population Distribution in US&amp;quot;, 
                 legend = &amp;quot;Population&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/choropleth/index_files/figure-html/unnamed-chunk-9-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Asian Population Distribution
df_state_demographics$value&amp;lt;- df_state_demographics$percent_asian
state_choropleth(df_state_demographics, 
                 title  = &amp;quot;Asian Population Distribution in US&amp;quot;, 
                 legend = &amp;quot;Population&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/choropleth/index_files/figure-html/unnamed-chunk-10-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;World Map&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data(&amp;quot;df_pop_country&amp;quot;)
country_pop &amp;lt;- df_pop_country %&amp;gt;% arrange(desc(value))
head(country_pop,10)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##                      region      value
## 1                     china 1350695000
## 2                     india 1236686732
## 3  united states of america  313873685
## 4                 indonesia  246864191
## 5                    brazil  198656019
## 6                  pakistan  179160111
## 7                   nigeria  168833776
## 8                bangladesh  154695368
## 9                    russia  143178000
## 10                    japan  127561489&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;country_choropleth(country_pop, 
                 title  = &amp;quot;World map based on population estimates&amp;quot;, 
                 legend = &amp;quot;Population&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in self$bind(): The following regions were missing and are being set to
## NA: namibia, western sahara, taiwan, antarctica, kosovo&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/choropleth/index_files/figure-html/unnamed-chunk-12-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>An example preprint / working paper</title>
      <link>/publication/preprint/</link>
      <pubDate>Sun, 07 Apr 2019 00:00:00 +0000</pubDate>
      <guid>/publication/preprint/</guid>
      <description>&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    Click the &lt;em&gt;Slides&lt;/em&gt; button above to demo Academic&amp;rsquo;s Markdown slides feature.
  &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Supplementary notes can be added here, including 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/writing-markdown-latex/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;code and math&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Slides</title>
      <link>/slides/example/</link>
      <pubDate>Tue, 05 Feb 2019 00:00:00 +0000</pubDate>
      <guid>/slides/example/</guid>
      <description>&lt;h1 id=&#34;create-slides-in-markdown-with-academic&#34;&gt;Create slides in Markdown with Academic&lt;/h1&gt;
&lt;p&gt;
&lt;a href=&#34;https://sourcethemes.com/academic/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Academic&lt;/a&gt; | 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/managing-content/#create-slides&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Documentation&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;features&#34;&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Efficiently write slides in Markdown&lt;/li&gt;
&lt;li&gt;3-in-1: Create, Present, and Publish your slides&lt;/li&gt;
&lt;li&gt;Supports speaker notes&lt;/li&gt;
&lt;li&gt;Mobile friendly slides&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;controls&#34;&gt;Controls&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Next: &lt;code&gt;Right Arrow&lt;/code&gt; or &lt;code&gt;Space&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Previous: &lt;code&gt;Left Arrow&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Start: &lt;code&gt;Home&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Finish: &lt;code&gt;End&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Overview: &lt;code&gt;Esc&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Speaker notes: &lt;code&gt;S&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Fullscreen: &lt;code&gt;F&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Zoom: &lt;code&gt;Alt + Click&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;
&lt;a href=&#34;https://github.com/hakimel/reveal.js#pdf-export&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;PDF Export&lt;/a&gt;: &lt;code&gt;E&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;code-highlighting&#34;&gt;Code Highlighting&lt;/h2&gt;
&lt;p&gt;Inline code: &lt;code&gt;variable&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Code block:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;porridge = &amp;quot;blueberry&amp;quot;
if porridge == &amp;quot;blueberry&amp;quot;:
    print(&amp;quot;Eating...&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;h2 id=&#34;math&#34;&gt;Math&lt;/h2&gt;
&lt;p&gt;In-line math: $x + y = z$&lt;/p&gt;
&lt;p&gt;Block math:&lt;/p&gt;
&lt;p&gt;$$
f\left( x \right) = ;\frac{{2\left( {x + 4} \right)\left( {x - 4} \right)}}{{\left( {x + 4} \right)\left( {x + 1} \right)}}
$$&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;fragments&#34;&gt;Fragments&lt;/h2&gt;
&lt;p&gt;Make content appear incrementally&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{{% fragment %}} One {{% /fragment %}}
{{% fragment %}} **Two** {{% /fragment %}}
{{% fragment %}} Three {{% /fragment %}}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Press &lt;code&gt;Space&lt;/code&gt; to play!&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;fragment &#34; &gt;
One
&lt;/span&gt;
&lt;span class=&#34;fragment &#34; &gt;
&lt;strong&gt;Two&lt;/strong&gt;
&lt;/span&gt;
&lt;span class=&#34;fragment &#34; &gt;
Three
&lt;/span&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;A fragment can accept two optional parameters:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;class&lt;/code&gt;: use a custom style (requires definition in custom CSS)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;weight&lt;/code&gt;: sets the order in which a fragment appears&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;speaker-notes&#34;&gt;Speaker Notes&lt;/h2&gt;
&lt;p&gt;Add speaker notes to your presentation&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-markdown&#34;&gt;{{% speaker_note %}}
- Only the speaker can read these notes
- Press `S` key to view
{{% /speaker_note %}}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Press the &lt;code&gt;S&lt;/code&gt; key to view the speaker notes!&lt;/p&gt;
&lt;aside class=&#34;notes&#34;&gt;
  &lt;ul&gt;
&lt;li&gt;Only the speaker can read these notes&lt;/li&gt;
&lt;li&gt;Press &lt;code&gt;S&lt;/code&gt; key to view&lt;/li&gt;
&lt;/ul&gt;

&lt;/aside&gt;
&lt;hr&gt;
&lt;h2 id=&#34;themes&#34;&gt;Themes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;black: Black background, white text, blue links (default)&lt;/li&gt;
&lt;li&gt;white: White background, black text, blue links&lt;/li&gt;
&lt;li&gt;league: Gray background, white text, blue links&lt;/li&gt;
&lt;li&gt;beige: Beige background, dark text, brown links&lt;/li&gt;
&lt;li&gt;sky: Blue background, thin dark text, blue links&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;night: Black background, thick white text, orange links&lt;/li&gt;
&lt;li&gt;serif: Cappuccino background, gray text, brown links&lt;/li&gt;
&lt;li&gt;simple: White background, black text, blue links&lt;/li&gt;
&lt;li&gt;solarized: Cream-colored background, dark green text, blue links&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;

&lt;section data-noprocess data-shortcode-slide
  
      
      data-background-image=&#34;/img/boards.jpg&#34;
  &gt;

&lt;h2 id=&#34;custom-slide&#34;&gt;Custom Slide&lt;/h2&gt;
&lt;p&gt;Customize the slide style and background&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-markdown&#34;&gt;{{&amp;lt; slide background-image=&amp;quot;/img/boards.jpg&amp;quot; &amp;gt;}}
{{&amp;lt; slide background-color=&amp;quot;#0000FF&amp;quot; &amp;gt;}}
{{&amp;lt; slide class=&amp;quot;my-style&amp;quot; &amp;gt;}}
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;h2 id=&#34;custom-css-example&#34;&gt;Custom CSS Example&lt;/h2&gt;
&lt;p&gt;Let&amp;rsquo;s make headers navy colored.&lt;/p&gt;
&lt;p&gt;Create &lt;code&gt;assets/css/reveal_custom.css&lt;/code&gt; with:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-css&#34;&gt;.reveal section h1,
.reveal section h2,
.reveal section h3 {
  color: navy;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;h1 id=&#34;questions&#34;&gt;Questions?&lt;/h1&gt;
&lt;p&gt;
&lt;a href=&#34;https://spectrum.chat/academic&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ask&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;
&lt;a href=&#34;https://sourcethemes.com/academic/docs/managing-content/#create-slides&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Documentation&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Privacy Policy</title>
      <link>/privacy/</link>
      <pubDate>Thu, 28 Jun 2018 00:00:00 +0100</pubDate>
      <guid>/privacy/</guid>
      <description>&lt;p&gt;&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Terms</title>
      <link>/terms/</link>
      <pubDate>Thu, 28 Jun 2018 00:00:00 +0100</pubDate>
      <guid>/terms/</guid>
      <description>&lt;p&gt;&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>An example journal article</title>
      <link>/publication/journal-article/</link>
      <pubDate>Tue, 01 Sep 2015 00:00:00 +0000</pubDate>
      <guid>/publication/journal-article/</guid>
      <description>&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    Click the &lt;em&gt;Cite&lt;/em&gt; button above to demo the feature to enable visitors to import publication metadata into their reference management software.
  &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    Click the &lt;em&gt;Slides&lt;/em&gt; button above to demo Academic&amp;rsquo;s Markdown slides feature.
  &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Supplementary notes can be added here, including 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/writing-markdown-latex/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;code and math&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>An example conference paper</title>
      <link>/publication/conference-paper/</link>
      <pubDate>Mon, 01 Jul 2013 00:00:00 +0000</pubDate>
      <guid>/publication/conference-paper/</guid>
      <description>&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    Click the &lt;em&gt;Cite&lt;/em&gt; button above to demo the feature to enable visitors to import publication metadata into their reference management software.
  &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    Click the &lt;em&gt;Slides&lt;/em&gt; button above to demo Academic&amp;rsquo;s Markdown slides feature.
  &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Supplementary notes can be added here, including 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/writing-markdown-latex/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;code and math&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
